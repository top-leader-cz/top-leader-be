server:
  port: 8080
  servlet:
    session:
      timeout: 15m
      cookie:
        same-site: lax
        secure: false
        http-only: true

spring:

  threads:
    virtual:
      enabled: true
  jmx:
    enabled: false
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:dummy-api-key}
      chat:
        options:
          model: gpt-4o
  datasource:
    url: jdbc:postgresql://localhost:5432/top_leader
    username: root
    password: postgres
    hikari:
      # Optimized for virtual threads (local development)takze ded deployment?
      minimum-idle: 5
      maximum-pool-size: 20
      idle-timeout: 300000
      connection-timeout: 5000
      leak-detection-threshold: 60000
      keepalive-time: 30000
      max-lifetime: 600000
      data-source-properties:
        prepStmtCacheSize: 100
        prepStmtCacheSqlLimit: 1024

  flyway:
    enabled: true
    placeholder-replacement: false
    baseline-on-migrate: true
    validate-on-migrate: true
  mail:
    host: smtp-relay.gmail.com
    port: 587
    username: ${SPRING_MAIL_USERNAME:topleaderplatform@topleader.io}
    password: ${SPRING_MAIL_PASSWORD:}
    properties:
      mail:
        transport:
          protocol: smtp
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

  servlet:
    multipart:
      max-file-size: 15MB  # Spring hard limit (your code validates at 10MB with better error message)

  jackson:
    date-format: "yyyy-MM-dd'T'HH:mm:ss"
    deserialization:
      fail-on-null-for-primitives: false

top-leader:
  app-url: http://localhost:8080
  supported-invitations: en, cs, fr, de
  default-locale: en
  default-from: TopLeaderPlatform@topleader.io
  feedback:
    summary-limit: 1
  upload:
    allowed-image-types:
      - image/jpeg
      - image/png
      - image/gif
      - image/webp
      - image/svg+xml
    max-image-size-bytes: 10485760
  calendly:
    client-id: client-id
    client-secrets: client-secrets
    redirect-uri: http://localhost:8080/login/calendly
    base-api-url: https://api.calendly.com
    base-auth-url: https://auth.calendly.com
  job-trigger:
    password: ${JOB_TRIGGER_PASSWORD:default-dev-password}

google:
  client:
    client-id: client-id
    client-secret: client-id
    redirectUri: http://localhost:8080/login/google


openai:
  image:
    url: https://api.openai.com/v1/images/generations

gcp:
  storage:
    enabled: false
    bucket-name: ai-images-top-leader

tavily:
  api-key: ${TAVILY_API_KEY:}

thumbmail: http://i3.ytimg.com/vi/%s/hqdefault.jpg

springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html

management:
  endpoints:
    web:
      exposure:
        include: health,threaddump
  opentelemetry:
    resource-attributes:
      "service.name": top-leader
      "service.namespace": topleader
      "deployment.environment": local
  otlp:
    metrics:
      export:
        enabled: false
        url: https://otlp-gateway-prod-eu-west-2.grafana.net/otlp/v1/metrics
        headers:
          Authorization: "Basic ${GRAFANA_OTLP_TOKEN}"
        step: 30s
  metrics:
    tags:
      application: top-leader
      environment: local
    distribution:
      percentiles-histogram:
        http.server.requests: true



